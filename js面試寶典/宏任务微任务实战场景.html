<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®ä»»åŠ¡å¾®ä»»åŠ¡ - å®æˆ˜åœºæ™¯ä¸çœŸå®Bugæ¡ˆä¾‹</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        h2 {
            color: #4CAF50;
            margin-top: 30px;
        }
        h3 {
            color: #666;
            margin-top: 20px;
        }
        .truth {
            background: #e3f2fd;
            padding: 20px;
            border-left: 5px solid #2196F3;
            margin: 20px 0;
            font-size: 18px;
        }
        .reality {
            background: #fff3e0;
            padding: 15px;
            border-left: 4px solid #ff9800;
            margin: 15px 0;
        }
        .bug-example {
            background: #ffebee;
            padding: 15px;
            border-left: 4px solid #f44336;
            margin: 15px 0;
        }
        .good-practice {
            background: #e8f5e9;
            padding: 15px;
            border-left: 4px solid #4CAF50;
            margin: 15px 0;
        }
        .code-block {
            background: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            overflow-x: auto;
        }
        pre {
            margin: 0;
            white-space: pre-wrap;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button:hover {
            background: #45a049;
        }
        .demo-area {
            border: 2px solid #ddd;
            padding: 20px;
            margin: 15px 0;
            border-radius: 4px;
            min-height: 100px;
        }
        .warning {
            color: #d32f2f;
            font-weight: bold;
        }
        .highlight {
            background: #ffeb3b;
            padding: 2px 5px;
            font-weight: bold;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #4CAF50;
            color: white;
        }
        .interview-tip {
            background: #f3e5f5;
            padding: 15px;
            border-left: 4px solid #9c27b0;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ¯ å®ä»»åŠ¡å¾®ä»»åŠ¡ï¼šå®æˆ˜åœºæ™¯ä¸é¢è¯•çœŸç›¸</h1>
    
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; margin: 20px 0; border-radius: 8px; text-align: center; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">
        <p style="color: #fff; font-size: 18px; margin: 0 0 10px 0; font-weight: bold;">ğŸ’¬ æ¬¢è¿æ·»åŠ æˆ‘çš„å¾®ä¿¡ï¼Œä¸€èµ·äº¤æµå­¦ä¹ ï¼</p>
        <p style="color: #ffeb3b; font-size: 24px; margin: 0; font-weight: bold; letter-spacing: 2px;">ğŸ“± å¾®ä¿¡å·ï¼šLydia_web_developer</p>
    </div>

    <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 20px; margin: 20px 0; border-radius: 8px; text-align: center; box-shadow: 0 4px 15px rgba(245, 87, 108, 0.4);">
        <p style="color: #fff; font-size: 18px; margin: 0 0 10px 0; font-weight: bold;">â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘çš„GitHubç‚¹ä¸ªStarï¼</p>
        <p style="color: #fff; font-size: 20px; margin: 10px 0 0 0;">
            <a href="https://github.com/somanwai08/interviewtips" target="_blank" style="color: #ffeb3b; text-decoration: none; font-weight: bold; font-size: 22px; border: 2px solid #ffeb3b; padding: 10px 25px; border-radius: 25px; display: inline-block; transition: all 0.3s;" onmouseover="this.style.background='#ffeb3b'; this.style.color='#f5576c';" onmouseout="this.style.background='transparent'; this.style.color='#ffeb3b';">
                ğŸŒŸ GitHub: somanwai08/interviewtips
            </a>
        </p>
    </div>

    <div class="section">
        <h2>ğŸ’¡ é¢è¯•å®˜è€ƒå¯Ÿçš„çœŸæ­£ç›®çš„</h2>
        
        <div class="truth">
            <h3>ğŸ¤” é¢è¯•å®˜åˆ°åº•åœ¨è€ƒä»€ä¹ˆï¼Ÿ</h3>
            <p><strong>80% çš„æƒ…å†µï¼š</strong>åªæ˜¯åœ¨æµ‹è¯•ä½ <span class="highlight">æ˜¯å¦äº†è§£ JavaScript çš„å¼‚æ­¥æ‰§è¡Œæœºåˆ¶</span></p>
            <p><strong>20% çš„æƒ…å†µï¼š</strong>è€ƒå¯Ÿä½ <span class="highlight">æ˜¯å¦èƒ½å†™å‡ºä¸ä¼šå‡ºç°ç«æ€æ¡ä»¶çš„ä»£ç </span></p>
        </div>

        <div class="reality">
            <h3>ğŸ­ æ®‹é…·çš„çœŸç›¸ï¼š</h3>
            <ol style="font-size: 16px; line-height: 1.8;">
                <li><strong>æ—¥å¸¸å¼€å‘ä¸­ï¼Œä½ å¾ˆå°‘ä¼šå†™é‚£ç§å¤æ‚çš„æ‰§è¡Œé¡ºåºä»£ç </strong>
                    <ul>
                        <li>ç°ä»£æ¡†æ¶ï¼ˆReactã€Vueï¼‰å·²ç»å¸®ä½ å¤„ç†äº†å¤§éƒ¨åˆ†å¼‚æ­¥é—®é¢˜</li>
                        <li>async/await è®©ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥çš„</li>
                    </ul>
                </li>
                <li><strong>ä½†ä¸ç†è§£æ‰§è¡Œé¡ºåºï¼Œä¼šé‡åˆ°éš¾ä»¥è°ƒè¯•çš„ Bug</strong>
                    <ul>
                        <li>æ•°æ®æ›´æ–°äº†ä½†é¡µé¢æ²¡åˆ·æ–°</li>
                        <li>æŒ‰é’®ç‚¹å‡»åçŠ¶æ€ä¸å¯¹</li>
                        <li>æ¥å£æ•°æ®é¡ºåºæ··ä¹±</li>
                    </ul>
                </li>
                <li><strong>é¢è¯•å®˜ä¸»è¦çœ‹ä½ çš„åŸºç¡€çŸ¥è¯†æ˜¯å¦æ‰å®</strong>
                    <ul>
                        <li>èƒ½å›ç­”å‡ºæ¥ = åŸºç¡€å¥½</li>
                        <li>å›ç­”ä¸å‡ºæ¥ = åŸºç¡€å·®ï¼ˆå³ä½¿ä½ å®é™…å¼€å‘èƒ½åŠ›å¾ˆå¼ºï¼‰</li>
                    </ul>
                </li>
            </ol>
        </div>

        <div class="interview-tip">
            <h3>ğŸ“ é¢è¯•æŠ€å·§ï¼š</h3>
            <p><strong>å¦‚æœä½ å®åœ¨è®°ä¸ä½é‚£äº›å¤æ‚ä¾‹é¢˜ï¼Œè‡³å°‘è¦è¯´å‡ºï¼š</strong></p>
            <ul>
                <li>âœ… "æˆ‘çŸ¥é“ JavaScript æ˜¯å•çº¿ç¨‹çš„"</li>
                <li>âœ… "Promise.then æ˜¯å¾®ä»»åŠ¡ï¼ŒsetTimeout æ˜¯å®ä»»åŠ¡"</li>
                <li>âœ… "å¾®ä»»åŠ¡ä¼˜å…ˆçº§é«˜äºå®ä»»åŠ¡"</li>
                <li>âœ… "å®é™…å·¥ä½œä¸­æˆ‘ä¼šç”¨ async/await æ¥é¿å…å¤æ‚çš„æ‰§è¡Œé¡ºåºé—®é¢˜"</li>
            </ul>
            <p style="color: #9c27b0; font-weight: bold;">è¿™æ ·è‡³å°‘èƒ½åŠæ ¼ï¼</p>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ› çœŸå®Bugæ¡ˆä¾‹ï¼ˆè¿™æ‰æ˜¯é‡ç‚¹ï¼ï¼‰</h2>

        <!-- Bugæ¡ˆä¾‹1 -->
        <div class="bug-example">
            <h3>Bugæ¡ˆä¾‹1ï¼šDOMæ›´æ–°ä¸åŠæ—¶ï¼ˆé«˜é¢‘Bugï¼‰</h3>
            <p><strong>åœºæ™¯ï¼š</strong>ç‚¹å‡»æŒ‰é’®åï¼Œæƒ³å…ˆæ˜¾ç¤º loadingï¼Œå†å‘è¯·æ±‚</p>
            
            <div class="code-block">
<pre>// âŒ é”™è¯¯å†™æ³•ï¼ˆå¸¸è§Bugï¼‰
function handleClick() {
    showLoading();  // æ˜¾ç¤ºloading
    fetchData();    // å‘è¯·æ±‚ï¼ˆå¯èƒ½å¾ˆæ…¢ï¼‰
    hideLoading();  // éšè—loading
}

// é—®é¢˜ï¼šç”¨æˆ·çœ‹ä¸åˆ° loadingï¼Œå› ä¸ºä»£ç æ‰§è¡Œå¤ªå¿«äº†ï¼</pre>
            </div>

            <div class="demo-area" id="bugDemo1">
                <button onclick="bugExample1()">âŒ é”™è¯¯ç¤ºä¾‹ï¼šç‚¹æˆ‘çœ‹Bug</button>
                <div id="status1" style="margin-top: 10px; font-weight: bold;"></div>
            </div>

            <div class="good-practice">
                <h4>âœ… æ­£ç¡®å†™æ³•ï¼š</h4>
                <div class="code-block">
<pre>// æ–¹æ³•1ï¼šä½¿ç”¨ setTimeout ç¡®ä¿ DOM æ›´æ–°
function handleClick() {
    showLoading();
    
    setTimeout(() => {  // æ”¾åˆ°å®ä»»åŠ¡é˜Ÿåˆ—
        fetchData().then(() => {
            hideLoading();
        });
    }, 0);
}

// æ–¹æ³•2ï¼šä½¿ç”¨ Promiseï¼ˆæ›´æ¨èï¼‰
async function handleClick() {
    showLoading();
    
    await new Promise(resolve => setTimeout(resolve, 0)); // è®© DOM æœ‰æ—¶é—´æ›´æ–°
    
    try {
        await fetchData();
    } finally {
        hideLoading();
    }
}

// æ–¹æ³•3ï¼šæœ€ä½³å®è·µï¼ˆç°ä»£æ¡†æ¶ï¼‰
async function handleClick() {
    setLoading(true);  // React çš„ setState ä¼šè‡ªåŠ¨å¤„ç†
    try {
        await fetchData();
    } finally {
        setLoading(false);
    }
}</pre>
                </div>
                <button onclick="goodExample1()">âœ… æ­£ç¡®ç¤ºä¾‹ï¼šç‚¹æˆ‘çœ‹æ•ˆæœ</button>
                <div id="status2" style="margin-top: 10px; font-weight: bold;"></div>
            </div>
        </div>

        <!-- Bugæ¡ˆä¾‹2 -->
        <div class="bug-example">
            <h3>Bugæ¡ˆä¾‹2ï¼šçŠ¶æ€æ›´æ–°é¡ºåºé”™ä¹±</h3>
            <p><strong>åœºæ™¯ï¼š</strong>å¿«é€Ÿç‚¹å‡»æŒ‰é’®ï¼Œè®¡æ•°å™¨æ··ä¹±</p>
            
            <div class="code-block">
<pre>// âŒ é”™è¯¯å†™æ³•
let count = 0;

function increment() {
    setTimeout(() => {
        count = count + 1;  // å¦‚æœå¿«é€Ÿç‚¹å‡»ï¼Œå¯èƒ½ä¸¢å¤±æ›´æ–°
        updateUI();
    }, 100);
}

// é—®é¢˜ï¼šå¤šæ¬¡ç‚¹å‡»ä¼šæœ‰å¤šä¸ª setTimeoutï¼Œä½†éƒ½åŸºäºæ—§çš„ count å€¼</pre>
            </div>

            <div class="demo-area">
                <button onclick="bugExample2()">âŒ é”™è¯¯ç¤ºä¾‹ï¼šå¿«é€Ÿç‚¹å‡»å¤šæ¬¡</button>
                <span id="bugCount" style="margin-left: 20px; font-size: 20px; font-weight: bold;">0</span>
            </div>

            <div class="good-practice">
                <h4>âœ… æ­£ç¡®å†™æ³•ï¼š</h4>
                <div class="code-block">
<pre>// æ–¹æ³•1ï¼šä½¿ç”¨é˜Ÿåˆ—
let count = 0;
let pending = false;

async function increment() {
    if (pending) return;  // é˜²æ­¢é‡å¤ç‚¹å‡»
    pending = true;
    
    await new Promise(resolve => setTimeout(resolve, 100));
    count = count + 1;
    updateUI();
    
    pending = false;
}

// æ–¹æ³•2ï¼šä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼ˆReact æ–¹å¼ï¼‰
function increment() {
    setCount(prevCount => prevCount + 1);  // åŸºäºå‰ä¸€ä¸ªçŠ¶æ€
}</pre>
                </div>
                <button onclick="goodExample2()">âœ… æ­£ç¡®ç¤ºä¾‹ï¼šå¿«é€Ÿç‚¹å‡»å¤šæ¬¡</button>
                <span id="goodCount" style="margin-left: 20px; font-size: 20px; font-weight: bold;">0</span>
            </div>
        </div>

        <!-- Bugæ¡ˆä¾‹3 -->
        <div class="bug-example">
            <h3>Bugæ¡ˆä¾‹3ï¼šæ•°æ®è·å–é¡ºåºæ··ä¹±ï¼ˆç«æ€æ¡ä»¶ï¼‰</h3>
            <p><strong>åœºæ™¯ï¼š</strong>ç”¨æˆ·åœ¨æœç´¢æ¡†è¾“å…¥ï¼Œå¿«é€Ÿåˆ‡æ¢å…³é”®è¯ï¼Œæ˜¾ç¤ºäº†é”™è¯¯çš„ç»“æœ</p>
            
            <div class="code-block">
<pre>// âŒ é”™è¯¯å†™æ³•
async function search(keyword) {
    const result = await fetch(`/api/search?q=${keyword}`);
    displayResult(result);  // å¯èƒ½æ˜¾ç¤ºæ—§å…³é”®è¯çš„ç»“æœ
}

// ç”¨æˆ·è¾“å…¥ï¼šA â†’ B â†’ C
// ä½†å¦‚æœ C çš„è¯·æ±‚æ¯” B å¿«ï¼Œå°±ä¼šæ˜¾ç¤ºï¼šC â†’ Bï¼ˆé”™è¯¯ï¼ï¼‰</pre>
            </div>

            <div class="demo-area">
                <input type="text" id="bugSearch" placeholder="è¾“å…¥æœç´¢..." oninput="bugExample3(this.value)">
                <div id="bugResult" style="margin-top: 10px;"></div>
            </div>

            <div class="good-practice">
                <h4>âœ… æ­£ç¡®å†™æ³•ï¼š</h4>
                <div class="code-block">
<pre>// æ–¹æ³•1ï¼šä½¿ç”¨ AbortController å–æ¶ˆæ—§è¯·æ±‚
let currentController = null;

async function search(keyword) {
    // å–æ¶ˆä¸Šä¸€ä¸ªè¯·æ±‚
    if (currentController) {
        currentController.abort();
    }
    
    currentController = new AbortController();
    
    try {
        const result = await fetch(`/api/search?q=${keyword}`, {
            signal: currentController.signal
        });
        displayResult(result);
    } catch (err) {
        if (err.name === 'AbortError') {
            // è¯·æ±‚è¢«å–æ¶ˆï¼Œå¿½ç•¥
        }
    }
}

// æ–¹æ³•2ï¼šä½¿ç”¨ç‰ˆæœ¬å·
let searchVersion = 0;

async function search(keyword) {
    const currentVersion = ++searchVersion;
    const result = await fetch(`/api/search?q=${keyword}`);
    
    // åªæ˜¾ç¤ºæœ€æ–°çš„ç»“æœ
    if (currentVersion === searchVersion) {
        displayResult(result);
    }
}

// æ–¹æ³•3ï¼šä½¿ç”¨é˜²æŠ–ï¼ˆæœ€å¸¸ç”¨ï¼‰
const search = debounce(async (keyword) => {
    const result = await fetch(`/api/search?q=${keyword}`);
    displayResult(result);
}, 300);  // 300ms å†…åªæ‰§è¡Œæœ€åä¸€æ¬¡</pre>
                </div>
                <input type="text" id="goodSearch" placeholder="è¾“å…¥æœç´¢..." oninput="goodExample3(this.value)">
                <div id="goodResult" style="margin-top: 10px;"></div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>âœ… å®é™…å·¥ä½œä¸­çš„æœ€ä½³å®è·µ</h2>

        <table>
            <thead>
                <tr>
                    <th>åœºæ™¯</th>
                    <th>ä¸éœ€è¦å…³å¿ƒæ‰§è¡Œé¡ºåº</th>
                    <th>éœ€è¦å…³å¿ƒæ‰§è¡Œé¡ºåº</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>æ™®é€šä¸šåŠ¡é€»è¾‘</strong></td>
                    <td>âœ… 90% çš„æƒ…å†µ</td>
                    <td>âŒ ç”¨ async/await å°±è¡Œ</td>
                </tr>
                <tr>
                    <td><strong>DOM æ“ä½œ</strong></td>
                    <td>âŒ éœ€è¦æ³¨æ„</td>
                    <td>âœ… ä½¿ç”¨ setTimeout æˆ– requestAnimationFrame</td>
                </tr>
                <tr>
                    <td><strong>å¤šä¸ªå¼‚æ­¥è¯·æ±‚</strong></td>
                    <td>âŒ éœ€è¦æ³¨æ„</td>
                    <td>âœ… ä½¿ç”¨ Promise.all æˆ–ç«æ€å¤„ç†</td>
                </tr>
                <tr>
                    <td><strong>äº‹ä»¶å¤„ç†</strong></td>
                    <td>âŒ éœ€è¦æ³¨æ„</td>
                    <td>âœ… é˜²æŠ–èŠ‚æµã€çŠ¶æ€é”</td>
                </tr>
                <tr>
                    <td><strong>åŠ¨ç”»</strong></td>
                    <td>âŒ éœ€è¦æ³¨æ„</td>
                    <td>âœ… requestAnimationFrame</td>
                </tr>
            </tbody>
        </table>

        <div class="good-practice">
            <h3>ğŸ’ é»„é‡‘åŸåˆ™ï¼š</h3>
            <ol style="font-size: 16px; line-height: 1.8;">
                <li><strong>ä½¿ç”¨ async/await æ›¿ä»£ Promise é“¾</strong> - ä»£ç æ›´æ¸…æ™°</li>
                <li><strong>ç”¨é˜²æŠ–èŠ‚æµå¤„ç†é«˜é¢‘äº‹ä»¶</strong> - é¿å…æ€§èƒ½é—®é¢˜</li>
                <li><strong>ç”¨ Promise.all å¤„ç†å¹¶è¡Œè¯·æ±‚</strong> - æé«˜æ•ˆç‡</li>
                <li><strong>ç”¨ AbortController å–æ¶ˆè¿‡æœŸè¯·æ±‚</strong> - é¿å…ç«æ€</li>
                <li><strong>çŠ¶æ€ç®¡ç†ç”¨æ¡†æ¶</strong> - React/Vue å·²ç»å¸®ä½ å¤„ç†å¥½äº†</li>
            </ol>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“ å­¦ä¹ å»ºè®®</h2>

        <div class="reality">
            <h3>å¯¹äºä¸åŒæ°´å¹³çš„å¼€å‘è€…ï¼š</h3>
            
            <h4>ğŸŒ± åˆçº§å¼€å‘è€…ï¼ˆ0-1å¹´ï¼‰ï¼š</h4>
            <ul>
                <li>âœ… å¿…é¡»æŒæ¡ï¼šPromiseã€async/await åŸºæœ¬ç”¨æ³•</li>
                <li>âœ… å¿…é¡»çŸ¥é“ï¼šsetTimeout æ˜¯å¼‚æ­¥çš„ï¼ŒPromise.then æ¯” setTimeout å…ˆæ‰§è¡Œ</li>
                <li>â­ é¢è¯•èƒ½ç­”å¯¹åŸºç¡€é¢˜å°±å¤Ÿäº†</li>
                <li>âŒ ä¸ç”¨æ­»ç£•å¤æ‚çš„æ‰§è¡Œé¡ºåºé¢˜</li>
            </ul>

            <h4>ğŸŒ¿ ä¸­çº§å¼€å‘è€…ï¼ˆ1-3å¹´ï¼‰ï¼š</h4>
            <ul>
                <li>âœ… å¿…é¡»æŒæ¡ï¼šå®ä»»åŠ¡ã€å¾®ä»»åŠ¡çš„åŒºåˆ«</li>
                <li>âœ… å¿…é¡»ä¼šç”¨ï¼šé˜²æŠ–èŠ‚æµã€Promise.allã€é”™è¯¯å¤„ç†</li>
                <li>â­ é¢è¯•èƒ½è§£é‡Šæ¸…æ¥šæ‰§è¡Œæœºåˆ¶</li>
                <li>âœ… èƒ½è§£å†³å®é™…å·¥ä½œä¸­çš„å¼‚æ­¥ Bug</li>
            </ul>

            <h4>ğŸŒ³ é«˜çº§å¼€å‘è€…ï¼ˆ3å¹´+ï¼‰ï¼š</h4>
            <ul>
                <li>âœ… å¿…é¡»ç²¾é€šï¼šEvent Loopã€ç«æ€æ¡ä»¶ã€æ€§èƒ½ä¼˜åŒ–</li>
                <li>âœ… å¿…é¡»ä¼šè®¾è®¡ï¼šå¤æ‚å¼‚æ­¥æµç¨‹ã€çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ</li>
                <li>â­ é¢è¯•èƒ½ç§’ç­”æ‰€æœ‰æ‰§è¡Œé¡ºåºé¢˜</li>
                <li>âœ… èƒ½æŒ‡å¯¼å›¢é˜Ÿé¿å…å¼‚æ­¥é™·é˜±</li>
            </ul>
        </div>

        <div class="truth" style="margin-top: 30px;">
            <h3>ğŸ¯ ç»ˆæå»ºè®®ï¼š</h3>
            <p style="font-size: 18px;"><strong>ç†è§£åŸç† > èƒŒé¢˜</strong></p>
            <p>é¢è¯•å‰åˆ·å‡ é“é¢˜å°±å¤Ÿäº†ï¼Œå…³é”®æ˜¯ï¼š</p>
            <ul style="font-size: 16px;">
                <li>âœ… ç†è§£ä¸ºä»€ä¹ˆä¼šæœ‰å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡</li>
                <li>âœ… çŸ¥é“ä»€ä¹ˆæ—¶å€™ä¼šé‡åˆ°æ‰§è¡Œé¡ºåºé—®é¢˜</li>
                <li>âœ… ä¼šç”¨å·¥å…·å’Œæœ€ä½³å®è·µé¿å…é—®é¢˜</li>
                <li>âœ… èƒ½è§£é‡Šç»™é¢è¯•å®˜å¬</li>
            </ul>
            <p style="color: #2196F3; font-size: 18px; margin-top: 20px;">
                <strong>å®é™…å·¥ä½œä¸­ï¼Œå†™å‡ºå¯ç»´æŠ¤çš„ä»£ç  > å†™å‡ºç‚«æŠ€çš„ä»£ç </strong>
            </p>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ”§ å®ç”¨å·¥å…·å‡½æ•°</h2>

        <div class="code-block">
<pre>// é˜²æŠ–ï¼šæœ€åä¸€æ¬¡æ‰æ‰§è¡Œ
function debounce(fn, delay) {
    let timer = null;
    return function(...args) {
        clearTimeout(timer);
        timer = setTimeout(() => fn.apply(this, args), delay);
    };
}

// èŠ‚æµï¼šå›ºå®šæ—¶é—´æ‰§è¡Œä¸€æ¬¡
function throttle(fn, delay) {
    let last = 0;
    return function(...args) {
        const now = Date.now();
        if (now - last > delay) {
            last = now;
            fn.apply(this, args);
        }
    };
}

// å¸¦å–æ¶ˆçš„å¼‚æ­¥æ“ä½œ
function cancellableAsync(fn) {
    let cancelled = false;
    
    const promise = fn().then(result => {
        if (!cancelled) return result;
        throw new Error('Cancelled');
    });
    
    promise.cancel = () => { cancelled = true; };
    return promise;
}

// é‡è¯•æœºåˆ¶
async function retry(fn, times = 3) {
    for (let i = 0; i < times; i++) {
        try {
            return await fn();
        } catch (err) {
            if (i === times - 1) throw err;
            await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));
        }
    }
}

// å¹¶å‘æ§åˆ¶
async function concurrentLimit(tasks, limit) {
    const results = [];
    const executing = [];
    
    for (const task of tasks) {
        const p = Promise.resolve().then(() => task());
        results.push(p);
        
        if (limit <= tasks.length) {
            const e = p.then(() => executing.splice(executing.indexOf(e), 1));
            executing.push(e);
            if (executing.length >= limit) {
                await Promise.race(executing);
            }
        }
    }
    
    return Promise.all(results);
}</pre>
        </div>
    </div>

    <script>
        // Bugæ¡ˆä¾‹1ï¼šDOMæ›´æ–°ä¸åŠæ—¶
        function bugExample1() {
            const status = document.getElementById('status1');
            status.textContent = 'Loading...';
            status.style.color = 'orange';
            
            // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œï¼ˆåŒæ­¥ï¼‰
            const end = Date.now() + 2000;
            while (Date.now() < end) {} // é˜»å¡
            
            status.textContent = 'å®Œæˆï¼ï¼ˆä½†ä½ çœ‹ä¸åˆ° Loading è¿‡ç¨‹ï¼‰';
            status.style.color = 'red';
        }

        async function goodExample1() {
            const status = document.getElementById('status2');
            status.textContent = 'Loading...';
            status.style.color = 'orange';
            
            // è®© DOM æœ‰æ—¶é—´æ›´æ–°
            await new Promise(resolve => setTimeout(resolve, 0));
            
            // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            status.textContent = 'å®Œæˆï¼ï¼ˆä½ èƒ½çœ‹åˆ° Loading è¿‡ç¨‹ï¼‰';
            status.style.color = 'green';
        }

        // Bugæ¡ˆä¾‹2ï¼šçŠ¶æ€æ›´æ–°é¡ºåºé”™ä¹±
        let bugCount = 0;
        function bugExample2() {
            setTimeout(() => {
                bugCount = bugCount + 1;
                document.getElementById('bugCount').textContent = bugCount;
            }, 100);
        }

        let goodCount = 0;
        let pending = false;
        async function goodExample2() {
            if (pending) return;
            pending = true;
            
            await new Promise(resolve => setTimeout(resolve, 100));
            goodCount = goodCount + 1;
            document.getElementById('goodCount').textContent = goodCount;
            
            pending = false;
        }

        // Bugæ¡ˆä¾‹3ï¼šæœç´¢ç«æ€
        function bugExample3(keyword) {
            const result = document.getElementById('bugResult');
            result.textContent = 'æœç´¢ä¸­...';
            
            // æ¨¡æ‹Ÿéšæœºå»¶è¿Ÿçš„ API
            const delay = Math.random() * 1000;
            setTimeout(() => {
                result.textContent = `ç»“æœï¼š"${keyword}" (å»¶è¿Ÿ${delay.toFixed(0)}ms)`;
                result.style.color = 'red';
            }, delay);
        }

        // æ­£ç¡®çš„æœç´¢ï¼ˆä½¿ç”¨ç‰ˆæœ¬å·ï¼‰
        let searchVersion = 0;
        function goodExample3(keyword) {
            const currentVersion = ++searchVersion;
            const result = document.getElementById('goodResult');
            result.textContent = 'æœç´¢ä¸­...';
            
            const delay = Math.random() * 1000;
            setTimeout(() => {
                // åªæ˜¾ç¤ºæœ€æ–°ç‰ˆæœ¬çš„ç»“æœ
                if (currentVersion === searchVersion) {
                    result.textContent = `ç»“æœï¼š"${keyword}" (å»¶è¿Ÿ${delay.toFixed(0)}ms) âœ… æ­£ç¡®`;
                    result.style.color = 'green';
                }
            }, delay);
        }

        console.log('%cæ¬¢è¿å­¦ä¹ å®æˆ˜åœºæ™¯ï¼', 'color: #4CAF50; font-size: 20px; font-weight: bold;');

        // ========== æµ‹è¯•åŒºåŸŸ ==========
        function runTest() {
            console.clear();
            console.log('%c========== å¼€å§‹æµ‹è¯• ==========', 'color: #2196F3; font-size: 16px; font-weight: bold;');
            
            // æµ‹è¯•ä»£ç 
            console.log('start here')
            setTimeout(()=>{
                console.log('setTimeout')
            },0)

            new Promise((resolve,reject)=>{
                resolve('promise result')
            }).then(value=>{console.log(value)})
            console.log('end here')
        }
    </script>

    <!-- æµ‹è¯•åŒºåŸŸ -->
    <div class="section">
        <h2>ğŸ§ª Promise æ‰§è¡Œé¡ºåºåˆ†æï¼šfoo() ä¸­æ²¡æœ‰ return</h2>
        
        <div class="code-block">
            <h3>ğŸ“ æµ‹è¯•ä»£ç ï¼š</h3>
            <pre><code>console.log('start here')
            setTimeout(()=>{
                console.log('setTimeout')
            },0)

            new Promise((resolve,reject)=>{
                resolve('promise result')
            }).then(value=>{console.log(value)})
            console.log('end here')</code></pre>
        </div>

        <button onclick="runTest()" style="font-size: 16px; padding: 12px 24px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 10px 0;">
            ğŸš€ è¿è¡Œæµ‹è¯•ï¼ˆæ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹ç»“æœï¼‰
        </button>

    </div>

                let promise1 = new Promise((resolve,reject)=>{
                    console.log('second promise constructor')
                    setTimeout(()=>{
                        console.log('setTimeout here')
                        resolve
                    },0)

                    resolve('promise1')
                })
                resolve('promise0')

                promise1.then(arg => {
                    console.log(arg)
                })
            }))

            foo().then(arg =>{
                console.log(arg)
            })

            console.log('end here')</code></pre>
        </div>

        <button onclick="runTest()" style="font-size: 16px; padding: 12px 24px; background: #2196F3;">
            ğŸš€ è¿è¡Œæµ‹è¯•ï¼ˆæ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹ç»“æœï¼‰
        </button>

    </div>
</body>
</html>